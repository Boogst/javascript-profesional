{"version":3,"sources":["assets/MediaPlayer.js","assets/plugins/AutoPlay.js","assets/plugins/AutoPause.js","assets/index.js"],"names":["MediaPlayer","config","media","element","plugins","initPlugins","prototype","player","play","pause","muted","value","forEach","plugin","run","togglePlay","paused","mute","unmute","toggleMute","AutoPlay","AutoPause","constructor","threshold","handlerIntersection","bind","handleVisibilityChange","observer","IntersectionObserver","observe","document","addEventListener","entries","entry","isVisible","intersectionRatio","visibilityState","video","querySelector","button","buttonMute","onclick","navigator","serviceWorker","register","catch","error","console","log","message"],"mappings":";;AGCA;;AACA;;AACA;AHFA,AEDA,ADAA,MCAMqB,GFCGrB,ACDAoB,MCAT,CAAgB,CDAhB,GDCA,ACDmB,CDCEnB,ACDA,MDCrB,EAA6B;AACzB,AEAAqB,EAAAA,KFAKpB,KAAL,CEAW,CAACqB,CFACtB,MAAM,CAACE,CEAC,GAAG,GFAxB,CEAW,EAAkB;AFC7B,AEAI,ADDRiB,ODCShB,CCDD,CCCKoB,ADDJlB,KDCL,GAAeL,CCDnB,CAAmBa,GAAnB,CDCyB,CAACV,CCDD,GCCjB,GFAW,AEAgB,IFAE,ACDHG,CCCMiB,CFApC,ICDqB,EAAgB,YCCN,CAAyBC,IAAzB,CAA8B,IAA9B,CAA3B,CADyB,CACsC;AFEnE,AGLJ,AFE2C,ODGlCpB,WAAL;AACH,AGDD,ADDQ,ADDJ,MEEEgC,AFFC,CAAC9B,ECCKmB,ECCF,EFFG,CEEAI,AFFCpB,KAAX,EAAiB,CEEC,CAAC4B,QDDf,GAA8B,ECCxB,CAAuB,EDDMZ,KCC7B,CAAd,gBDDsC,CAA4BD,IAA5B,CAAiC,IAAjC,CAA9B;ACER,ADDQ,ADDA,MEEFlB,GDDOgB,GCCD,GAAG,GDDP,CCCWvB,EDDMuB,SAAjB,SCCO,CAAgB;AHE/BvB,AGFgCG,ADA3B,ADDG,EECwBA,OAAO,EHE5B,AGF8BkC,CHE7B/B,IGFmB,KHE/B,CAAsBD,WAAtB,GAAoC,YAAU;AAE1C,AGJ4CD,AFAxCG,EEAwCH,EFAxCG,IDIEA,CGJ6C,CFAzC,CEA2C,AFA1CG,CECX,EHGY,EGHRU,AFDA,CDIW,ECJI,IAAf,UECJ,EADqD,EAErD,IAAIC,kBAAJ,EAFqD;AHKjDb,AGLuB,ADE3BM,ADDC,CEDU,CAAf,ADEIA,EFGIN,CEHD,CAACD,EFGI,EAAE,EEHP,EAAS,EFGI,KAAKC,IAAL,EADD;AACc,AGAjC,ADDQ,MCCF+B,GDDOhC,GCCD,GAAGuB,ADDP,GAAcvB,KCCC,CAAC+B,ADDhB,CAFQ,CAGgC,WCAjC,CAAuB,aAAvB,CAAf;AHCQ7B,AGAR,AFFIF,EAAAA,EDEIE,EGAF+B,EFFI,CDEG,ACFFhC,EDEI,ECFX,GEEY,CHAK,EGAFsB,GHAOrB,KAAL,AGAM,CAAC6B,CHFT,YGEA,CAAuB,aAAvB,CAAnB;AHCQpC,AEDA,ADDP,CATD,GDWQA,KAAK,CEDCyB,CFCC,KAAKzB,EEDE,GFFH,AEEM,IAAI0B,oBAAJ,CAAyB,KAAKJ,mBAA9B,EAAmD;ACC5Ee,ADAYhB,MCAN,ADAMA,CCALkB,OAAP,CDAqB,ECAJ,ADAM,KAAKlB,CCALhB,MAAM,CAACQ,CDD8C,CACtC,QCAf,EAAvB;AHCQ,QAAIL,KAAJ,ECDOU,CDCI;AACP,AGDZoB,ADF4E,KAAnD,CAAjB,ICEE,CAACC,EHCQ,KAAKvC,AGDxB,GAAqB,EHCF,CAAWQ,GGDHH,EHCf,IGDqB,CAACY,UAAP,EAA3B;AHES,AEADQ,IAAAA,CFNW,OEMH,CAACE,OAAT,CAAiB,KAAKtB,MAAL,CAAYL,KAA7B;ACAR,ADEQ4B,ICFL,ADEKA,QAAQ,CAACC,UCFKW,MDEd,CAA0B,ECFlC,EAAgC,cDExB,EAA8C,KAAKhB,sBAAnD;AFDA,AGAwB,ADG3B,QFHOhB,KAAJ,CAAUC,KAAV,EAAgB;AACZ,AGAR+B,EAAAA,SHAaxC,AGAJ,CAACyC,IHAF,CAAWjC,KAAX,GAAmBC,AGA3B,CAAwBiC,IHAhB,IGAR,CAAiC,sCAAjC,EAA2CC,KAA3C,CAAiDC,KAAK,IAAG;AHCpD,AGADC,ADGJvB,EAAAA,ECHIuB,OAAO,CAACC,GAAR,CAAYF,KAAK,ADGF,CCHGG,ADGFjB,OCHhB,ADGe,EAAUL,QAAV,EAAmB;ACFrC,ADIG,GCNJ,ODMUM,KAAK,GAAGD,OAAO,CAAC,CAAD,CAArB;AFdW,AGWlB,ADKO,GFhBJ,OEgBUE,SAAS,GAAGD,KAAK,CAACE,iBAAN,IAA2B,KAAKZ,SAAlD;AFJJ,OAAKnB,OAAL,CAAaQ,OAAb,CAAqBC,MAAM,IAAG;AAC1BA,AEKA,IFLAA,IEKGqB,EFLG,CAACpB,GAAP,CAAWP,EEKX,EAAa,EFLb;AACH,AEKO,GFPR,QEOaA,MAAL,CAAYC,IAAZ;AFJX,AEKQ,CFtBT,IEoBQ,MAEK;AACD,WAAKD,MAAL,CAAYE,KAAZ;AFJZT,AEKS,WFLE,CAACM,SAAZ,CAAsBE,IAAtB,GAA6B,YAAY;AACrC,AEKC,OFLIN,KAAL,CAAWM,IAAX;AACH,CAFD;AEQIkB,EAAAA,sBAAsB,GAAE;AFJ5B1B,AEKQ,UAAMkC,CFLH,CAAC5B,OEKW,EFLvB,CAAsBG,AEKIqB,KFL1B,GAA8B,AEKI,CAACM,WFLO,IEKhB,KAA6B,SAA/C;AFJJ,AEMIF,IAAAA,GFNChC,KAAL,CAAWO,AEME,GAAG,EFNhB,GEMqBF,MAAL,CAAYC,IAAZ,EAAH,GAAwB,KAAKD,MAAL,CAAYE,KAAZ,EAAjC;AFLP,AEMI,CFRL;;AAIAT,AEnCgB,WFmCL,CAACM,SAAZ,CAAsBS,UAAtB,GAAmC,YAAY;AAC3C,OAAKb,KAAL,CAAWc,MAAX,GAAoB,KAAKR,IAAL,EAApB,GAAkC,KAAKC,KAAL,EAAlC;AACH,CAFD,cEOeY;;AFHfrB,WAAW,CAACM,SAAZ,CAAsBW,IAAtB,GAA6B,YAAY;AACrC,OAAKf,KAAL,CAAWQ,KAAX,GAAmB,IAAnB;AACH,CAFD;;AAIAV,WAAW,CAACM,SAAZ,CAAsBY,MAAtB,GAA+B,YAAY;AACvC,OAAKhB,KAAL,CAAWQ,KAAX,GAAmB,KAAnB;AACH,CAFD;;AAIAV,WAAW,CAACM,SAAZ,CAAsBa,UAAtB,GAAmC,YAAU;AACzC,OAAKjB,KAAL,CAAWQ,KAAX,GAAmB,KAAKQ,MAAL,EAAnB,GAAmC,KAAKD,IAAL,EAAnC;AACH,CAFD;;eAIejB","file":"assets.8f4429fc.js","sourceRoot":"..","sourcesContent":["\nfunction MediaPlayer(config) {\n    this.media = config.element;\n    this.plugins = config.plugins || [];\n    \n    this.initPlugins();\n}\n\nMediaPlayer.prototype.initPlugins = function(){\n    \n    const player = {\n        play: () => this.play(), //Esto se pasa como si fuera una referencia por lo tanto debemos ejecutarla despues utilizando los ()\n        pause: () => this.pause(),\n        media: this.media,\n        get muted(){\n            return this.media.muted\n        },\n        set muted(value){\n            this.media.muted = value\n        }\n    }\n\n    this.plugins.forEach(plugin =>{\n        plugin.run(player);\n    });\n}\n\nMediaPlayer.prototype.play = function () {\n    this.media.play();\n}\n\nMediaPlayer.prototype.pause = function () {\n    this.media.pause();\n}\n\nMediaPlayer.prototype.togglePlay = function () {\n    this.media.paused ? this.play() : this.pause();\n}\n\nMediaPlayer.prototype.mute = function () {\n    this.media.muted = true;\n}\n\nMediaPlayer.prototype.unmute = function () {\n    this.media.muted = false;\n}\n\nMediaPlayer.prototype.toggleMute = function(){\n    this.media.muted ? this.unmute() : this.mute();\n}\n\nexport default MediaPlayer;\n","function AutoPlay(){}\n\nAutoPlay.prototype.run = function(player){ //objecto player, con sus propiedades => {play, muted}\n    if(!player.muted){\n        //  los setter no los llamos como si fuera una funcion \n        // Simplemente son un VALOR virtual que podemos asignar algun valor\n        player.muted = true \n    }\n    \n   \n    player.play()\n}\n\nexport default AutoPlay;","class AutoPause {\n\n    constructor(threshold = 0.25){\n        this.handlerIntersection = this.handlerIntersection.bind(this) //Con bind le decimos quien va a ser el this (forzamos) a que siempre sea la clase.\n        this.handleVisibilityChange = this.handleVisibilityChange.bind(this)\n        this.threshold = threshold\n    }\n\n    run(player) {\n\n        this.player = player\n                                                // El this se va a definir a base del objeto que esta llamando la funcion\n        const observer = new IntersectionObserver(this.handlerIntersection, {\n            threshold: this.threshold //este umbral lo que va a definir es: que porcentaje del elemento tiene que tener interccion con el contenedor para que te interese y me avise\n        });\n\n        observer.observe(this.player.media)\n\n        document.addEventListener('visibilitychange', this.handleVisibilityChange)\n\n    }\n\n    handlerIntersection(entries, observer){\n        \n        const entry = entries[0]\n\n        const isVisible = entry.intersectionRatio >= this.threshold\n\n        if(isVisible){\n            this.player.play()\n        }else{\n            this.player.pause();\n        }\n    }\n\n    handleVisibilityChange(){\n        const isVisible = document.visibilityState === 'visible'\n        \n        isVisible ? this.player.play() : this.player.pause()\n    }\n}\n\nexport default AutoPause;","//Cuando usamos scrips con type=\"moduls\" debemos ser especificos, declarar la extension.\nimport MediaPlayer from './MediaPlayer.js'\nimport AutoPlay from './plugins/AutoPlay.js'\nimport AutoPause from './plugins/AutoPause.js'\n\nconst video = document.querySelector('video');\nconst player = new MediaPlayer({element: video, plugins: [ \n    new AutoPlay(),\n    new AutoPause()\n] });\n    \nconst button = document.querySelector('#playButton');\nconst buttonMute = document.querySelector('#muteButton');\nbutton.onclick = () => player.togglePlay();\nbuttonMute.onclick = () => player.toggleMute();\n\nif('serviceWorker' in navigator){\n                                //Vamos a registrar un archivo\n    navigator.serviceWorker.register('/sw.js').catch(error =>{\n        console.log(error.message)\n    })\n}\n"]}